# TheRayCode
TheRayCode PHP 
# TheRayCode

Let's start by creatinig the interface **Handler** and we add two method stubs to it. **Handler** and **handle** which takes a string as a parameter called **$request**.
```php
public function setNext(Handler $handler): Handler;
public function handle(string $request): ?string;
``` 
Now let's add a class file and call **AbstractHandler** let it implement the **Handler** interface. Let's autogenerate **setNext** and **Handle**. 
To the setNext method we add the following code:
```php
$this->nextHandler = $handler;
return $handler;
```
To the method handle which take a string parameter called $request and returns a string we add the following code:
```php
if ($this->nextHandler) {
    return $this->nextHandler->handle($request);
}
return null;
```
This passes the **$request** to the next **Handler** in the chain.

Next I want to add three other other classes to create a chain for me to demo.
The first of these classes will be call the **DogHandler** and let's extend it with the **AbstractHandler**. 
Because this is extended with the **AbstractHandler** we need to add the function **handle** which takes the string parameter **request**.
To this method we add the following code:
```php
if ($request === "MeatBall") {
   return "Dog: I'll eat the " . $request . ".<br/>";
   } else {
   return parent::handle($request);
}
```
In this method we see that if request is a meat ball, then the dog will eat it. If it is not the dog will pass the request to the next anaimal in the chain.
The next animal in the chain we will create will be a Monkey we will call the MonkeyHandler.
‚ö°Ô∏è the üêí
the **MonkeyHandler** is also extend by **AbstractHandler** because it is, we also need to add some code to the autogenerated method **handle**.
To the **MonkeyHandler** we add the following code:
```php
if ($request === "Banana") {
    return "Monkey: I'll eat the " . $request . ".<br/>";
    } else {
    return parent::handle($request);
 }
```
As expected monkies like bannas. In our program, if the monkey recives anything else he will pass the food item next to the next anamal in the chain. 
The last animal we will add to our chain will be the squirre. We call this class the **SquirrelHandler**. 
Like the last two, we need to extend this class with the **AbstractHandler**.
We will use the autogenerator to add the **handel** method. To this method we add following code:
```php
if ($request === "Nut") {
    return "Squirrel: I'll eat the " . $request . ".<br/>";
    } else {
    return parent::handle($request);
}
```
Now let's create the main part to our demo. We go to the **index.php** file and add the following includes:

```php
include_once ('Handler.php');
include_once ('AbstractHandler.php');
```
we also need to add our menagerie of animals as includes"
```php
include_once('MouseHandler.php');
include_once ('SquirrelHandler.php');
include_once ('DogHandler.php');
```
next we add some client code:
```php
function clientCode(Handler $handler)
{
    foreach (["Nut", "Cheese", "Cup of coffee"] as $food) {
        echo "Client: Who wants the " . $food . "?<br/>";
        $result = $handler->handle($food);
        if ($result) {
            echo "  " . $result;
        } else {
            echo "  " . $food . " was left untouched.<br/>";
        }
    }
}
```
after that we define some animales
```php
$mouse = new MouseHandler;
$squirrel = new SquirrelHandler;
$dog = new DogHandler;
```
now let's create a chain:
```php
$mouse->setNext($squirrel)->setNext($dog);

echo "<b>Chain: Mouse > Squirrel > Dog</b><br/>";
clientCode($mouse);
echo "<br/>";
```
Let's do this with a subcain:
```php
echo "<b>Subchain: Squirrel > Dog</b><br/>";
clientCode($squirrel);
echo "<br/>";
```
Let's run our example.


[RayAndrade.com](https://www.RayAndrade.com)

[RayAndrade.org](https://www.RayAndrade.org)
